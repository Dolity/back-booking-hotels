<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    Login Form
    <div>
        Email <input type="text" id="email">
    </div>

    <div>
      Password <input type="password" id="password">
    </div>

    <button onclick="login()">Login</button>
    <button onclick="getUsers()">Get user</button>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const login = async () => {
        try {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          
          const response = await axios.post("http://localhost:8000/api/login", {
            email,
            password,
          }, {
            //2. use cookie & 3.
            withCredentials: true
          });

          console.log("response", response.data);

          //1. use Token
          //localStorage.setItem('token', response.data.token);


        } catch (error) {
          console.log("error", error);
        }
      }

      const getUsers = async () => {
        try {
        //const authToken = localStorage.getItem('token');
          const response = await axios.get("http://localhost:8000/api/users", {
            //1. use Token
            // headers: {
            //   'authorization': `Bearer ${authToken}`
            // }

            //2. use cookie
            withCredentials: true
          });

          console.log("response", response.data);
        } catch (error) {
          console.log("error", error);
        }
      }
    </script>

  </body>
</html>
